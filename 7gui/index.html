<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon"
          href='data:image/svg+xml;utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="16" width="16">%3C/svg>'>
    <title>7GUIs</title>
    <style>
input {
  padding: 1em;
}

    </style>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <meta name="description"
          content="7GUIs">
</head>
<body>
<header>
    <a href="https://eugenkiss.github.io/7guis/tasks/">7GUIs challenge</a> in simple HTML
</header>
<main>
    <article>
        <h4>Counter</h4>
        <form onsubmit="event.preventDefault(); counter.value=parseInt(counter.value) + 1">
            <input type="submit"
                   value="+"/>
            <output name="counter">0
            </output>
        </form>
    </article>
    <article>
        <h4>TempConv</h4>
        <form onsubmit="event.preventDefault()">
            <label>
                Celsius
                <input onchange="fahrenheit.valueAsNumber = (celsius.valueAsNumber * (9 / 5)) + 32"
                       name="celsius"
                       step="any"
                       type="number"/>
            </label>
            <label>
                Fahrenheit
                <input onchange="celsius.valueAsNumber = (fahrenheit.valueAsNumber - 32) * (5 / 9)"
                       name="fahrenheit"
                       step="any"
                       type="number"/>
            </label>
        </form>
    </article>
    <article>
        <h4>Book Flight</h4>
        <form onsubmit="event.preventDefault()">
            <label>
                Flight mode
                <select onchange="back.disabled = (this.value == 'oneway')">
                    <option value="round">return flight</option>
                    <option value="oneway">one-way flight</option>
                </select>
            </label>
            <label>
                going
                <input onchange="back.min = going.value"
                       required
                       name="going"
                       type="date"/>
            </label>
            <label>
                back
                <input onchange="going.max = back.value"
                       required
                       name="back"
                       type="date"/>
            </label>
            <input type="submit">
        </form>
    </article>
    <article>
        <h4>Timer</h4>
        <progress id="progress"
                  max="100"
                  value="0">
        </progress>
        <form onsubmit="event.preventDefault(); this.dataset.frame = requestAnimationFrame(progressAnimation('progress', duration))"
              oninput="elapsed.value = `${duration.valueAsNumber}s`">
            <label>
                Elapsed Time
                <output name="elapsed">0</output>
            </label>
            <label>
                Duration
                <input name="duration"
                       type="range"/>
            </label>
            <input type="submit">
        </form>
    </article>
    <script>
let progressAnimation = (progressId, durationElement) => {
  let progressElement = document.getElementById(progressId);
  let instZero = new Date();
  let animationFrame = () => {
     let instFinal = new Date(instZero);

     instFinal.setSeconds(instFinal.getSeconds() + durationElement.valueAsNumber);

     let instCurrent = new Date();
     if (instCurrent > instFinal) {
       return
     }
     let total = instFinal - instZero
     progressElement.max = total
     progressElement.value = total - (instFinal - instCurrent)
     requestAnimationFrame(animationFrame)
  }
  return animationFrame
}

    </script>
</main>
</body>
</html>
